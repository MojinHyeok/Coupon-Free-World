<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="com.ssafy.backend.feed.mapper.FeedMapper">
	<insert id="writeFeed" parameterType="FeedModel" >
		INSERT
		INTO feed (
			userID,
			photoPath1,
			photoPath2,
			photoPath3,
			photoPath4,
			content,
			date,
			likeCnt
		)
		VALUES (
			#{userID},
			#{photoPath1},
			#{photoPath2},
			#{photoPath3},
			#{photoPath4},
			#{content},
			#{date},
			#{likeCnt}
		)
	</insert>
	
	<delete id="deleteFeed" parameterType="int">
		DELETE
		FROM feed
		WHERE feedID = #{feedID} AND userID = #{userID}
	</delete>
	
	<update id="incLikeCnt" parameterType="int">
		UPDATE feed
		SET likeCnt = likeCnt+1 
		WHERE feedID = #{feedID};
	</update>

	<update id="decLikeCnt" parameterType="int">
		UPDATE feed
		SET likeCnt = likeCnt-1 
		WHERE feedID = #{feedID};
	</update>
	
	<select id="getFeedList" parameterType="int" resultType="FeedModel">
		SELECT *
		FROM feed
		WHERE userID = #{userID}
		ORDER BY date DESC;
	</select>
	
	<insert id="insertLikeFeed" parameterType="map">
		INSERT
		INTO likefeed(
			userID,
			feedID
		)
		VALUES (
			#{userID},
			#{feedID}
		)
	</insert>
	
	<delete id="deleteLikeFeed" parameterType="map">
		DELETE
		FROM likefeed
		WHERE userID = #{userID} AND feedID = #{feedID}
	</delete>
	
</mapper>